@using Recycle.Areas.Shop.ViewModels.Order.Helpers

@inject Recycle.App_Custom.Services.ClientCurrency.ClientCurrencyService ClientCurrency
@inject Recycle.App_Custom.Services.ClientShoppingCart.ClientShoppingCartService ClientCart

@model Recycle.Areas.Shop.ViewModels.Order.CheckoutVM

@{
    ViewData["Title"] = "Checkout";

    List<DeliveryMethod> deliveryMethods = (ViewData["DeliveryMethods"] as List<DeliveryMethod>);
    if (deliveryMethods == null)
    {
        throw new NullReferenceException($"{deliveryMethods} cannot be null. ViewData[\"DeliveryMethods\"] is required.");
    }

    int stepCounter = 0;
}

<section class="bg-light-2">
    <div class="sec-container">
        <div class="maxw-2xl m-auto py-5-desktop">
            <h1 class="title-1 font-weight-bold mb-5">Checkout</h1>
            <form data-stepper-form asp-area="Shop" asp-controller="Order" asp-action="Checkout" method="post">
                <div class="row">
                    <div class="col-xl-8 mb-5">
                        <div class="form-container bg-white">
                            <div class="stepper" data-stepper>
                                <ul class="step-tabs @(Context.User.Identity.IsAuthenticated ? "count-4" : "count-5")" role="tablist">
                                    @if (Context.User.Identity.IsAuthenticated == false)
                                    {
                                        <li role="presentation">
                                            <button type="button" role="tab" class="step current" data-step-target="#step-account" aria-selected="true">
                                                <span class="step-num">@(++stepCounter)</span>
                                                <span class="step-num-dot">.</span>
                                                <span class="step-label">Account</span>
                                            </button>
                                        </li>
                                    }
                                    <li role="presentation">
                                        <button type="button" role="tab" class="step @(Context.User.Identity.IsAuthenticated ? "current" : "")" data-step-target="#step-address" aria-selected="@(Context.User.Identity.IsAuthenticated ? "true" : "false")">
                                            <span class="step-num">@(++stepCounter)</span>
                                            <span class="step-num-dot">.</span>
                                            <span class="step-label">Address</span>
                                        </button>
                                    </li>
                                    <li role="presentation">
                                        <button type="button" role="tab" class="step" data-step-target="#step-delivery" aria-selected="false">
                                            <span class="step-num">@(++stepCounter)</span>
                                            <span class="step-num-dot">.</span>
                                            <span class="step-label">Delivery</span>
                                        </button>
                                    </li>
                                    <li role="presentation">
                                        <button type="button" role="tab" class="step" data-step-target="#step-payment" aria-selected="false">
                                            <span class="step-num">@(++stepCounter)</span>
                                            <span class="step-num-dot">.</span>
                                            <span class="step-label">Payment</span>
                                        </button>
                                    </li>
                                    <li role="presentation">
                                        <button type="button" role="tab" class="step" data-step-target="#step-review" aria-selected="false">
                                            <span class="step-num">@(++stepCounter)</span>
                                            <span class="step-num-dot">.</span>
                                            <span class="step-label">Review</span>
                                        </button>
                                    </li>
                                </ul>
                                <div class="step-content">
                                    @if (Context.User.Identity.IsAuthenticated == false)
                                    {
                                        <div class="step-panel active" role="tabpanel" id="step-account">
                                            <div data-tab-switcher>
                                                <input type="hidden" asp-for="SignMethod" />
                                                <p class="mb-5">We need to identify you in order to create your order. Please <a asp-area="Account" asp-controller="Authenticate" asp-action="Login" class="primary-link"><u>login</u></a> or <a asp-area="Account" asp-controller="Authenticate" asp-action="Register" class="primary-link"><u>sign up</u></a>.</p>
                                                <div class="d-flex mb-5">
                                                    <div class="custom-control custom-radio mr-5 current" data-tab-target="#tab-login" aria-selected="true">
                                                        <input type="hidden" asp-for="LoginVM.SignMethod" />
                                                        <input type="radio" name="SignMethodRadio" id="@Html.IdFor(m => m.LoginVM.SignMethod)Radio" value="@SignMethod.Login" data-update-val="#@Html.IdFor(m => m.SignMethod),#@Html.IdFor(m => m.LoginVM.SignMethod),#@Html.IdFor(m => m.RegisterVM.SignMethod)" class="custom-control-input" @(Model.SignMethod == SignMethod.Login ? "checked" : "") />
                                                        <label for="@Html.IdFor(m => m.LoginVM.SignMethod)Radio" class="custom-control-label txt-primary">Login</label>
                                                    </div>
                                                    <div class="custom-control custom-radio" data-tab-target="#tab-register" aria-selected="false">
                                                        <input type="hidden" asp-for="RegisterVM.SignMethod" />
                                                        <input type="radio" name="SignMethodRadio" id="@Html.IdFor(m => m.RegisterVM.SignMethod)Radio" value="@SignMethod.Register" data-update-val="#@Html.IdFor(m => m.SignMethod),#@Html.IdFor(m => m.LoginVM.SignMethod),#@Html.IdFor(m => m.RegisterVM.SignMethod)" class="custom-control-input" @(Model.SignMethod == SignMethod.Register ? "checked" : "") />
                                                        <label for="@Html.IdFor(m => m.RegisterVM.SignMethod)Radio" class="custom-control-label txt-primary">Sign up</label>
                                                    </div>
                                                </div>
                                                <div data-tab-panels class="maxw-sm px-md-5">
                                                    <div id="tab-login" class="active">
                                                        <partial name="~/Areas/Shop/Views/Order/_CheckoutLoginFormPartial.cshtml" for="LoginVM" />
                                                    </div>
                                                    <div id="tab-register">
                                                        <partial name="~/Areas/Shop/Views/Order/_CheckoutRegisterFormPartial.cshtml" for="RegisterVM" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <div class="step-panel @(Context.User.Identity.IsAuthenticated ? "active" : "")" role="tabpanel" id="step-address">
                                        <div class="row">
                                            <div class="col-md-6 px-md-5 mb-4">
                                                <h3 class="mb-4">Billing Details</h3>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="BillingDetails.Name" class="i-txt" />
                                                            <span asp-validation-for="BillingDetails.Name" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="BillingDetails.Phone" class="i-txt" />
                                                            <span asp-validation-for="BillingDetails.Phone" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="BillingDetails.Street" class="i-txt" />
                                                            <span asp-validation-for="BillingDetails.Street" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="BillingDetails.PostalCode" class="i-txt" />
                                                            <span asp-validation-for="BillingDetails.PostalCode" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="single-form-item">
                                                    <input asp-for="BillingDetails.City" class="i-txt" />
                                                    <span asp-validation-for="BillingDetails.City" class="text-danger"></span>
                                                </div>
                                                <div class="single-form-item">
                                                    <input asp-for="BillingDetails.Country" class="i-txt" />
                                                    <span asp-validation-for="BillingDetails.Country" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6 px-md-5 mb-4">
                                                <h3 class="mb-4">Shipping Details</h3>
                                                <div class="custom-control custom-checkbox mb-4">
                                                    <input type="checkbox" asp-for="ShippingDetails.ShippingSameAsBilling" id="ShippingSameAsBilling" class="custom-control-input" data-check-toggle-target="#shipping-details" />
                                                    <label for="ShippingSameAsBilling" class="custom-control-label txt-primary">Shipping Same As Billing</label>
                                                </div>
                                                <div id="shipping-details" data-check-toggle-state="@(Model.ShippingDetails.ShippingSameAsBilling ? "0" : "1")">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="single-form-item">
                                                                <input asp-for="ShippingDetails.Name" class="i-txt" />
                                                                <span asp-validation-for="ShippingDetails.Name" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="single-form-item">
                                                                <input asp-for="ShippingDetails.Phone" class="i-txt" />
                                                                <span asp-validation-for="ShippingDetails.Phone" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="single-form-item">
                                                                <input asp-for="ShippingDetails.Street" class="i-txt" />
                                                                <span asp-validation-for="ShippingDetails.Street" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="single-form-item">
                                                                <input asp-for="ShippingDetails.PostalCode" class="i-txt" />
                                                                <span asp-validation-for="ShippingDetails.PostalCode" class="text-danger"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="single-form-item">
                                                        <input asp-for="ShippingDetails.City" class="i-txt" />
                                                        <span asp-validation-for="ShippingDetails.City" class="text-danger"></span>
                                                    </div>
                                                    <div class="single-form-item">
                                                        <input asp-for="ShippingDetails.Country" class="i-txt" />
                                                        <span asp-validation-for="ShippingDetails.Country" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="step-panel" role="tabpanel" id="step-delivery">
                                        <h3 class="mb-4">Delivery Method</h3>
                                        <div class="mb-5">
                                            <span asp-validation-for="DeliveryMethodId" class="text-danger mb-4"></span>
                                            @foreach (var deliveryMethod in deliveryMethods)
                                            {
                                                <div class="radio-card mb-4">
                                                    <label for="delivery-method-@deliveryMethod.Id"></label>
                                                    <input type="radio" asp-for="DeliveryMethodId" id="delivery-method-@deliveryMethod.Id" value="@deliveryMethod.Id" data-delivery-method />
                                                    <div class="card">
                                                        <div class="row p-4">
                                                            <div class="col-md-7 px-5 mb-4 mb-md-0">
                                                                <h4 class="delivery-method-name">@deliveryMethod.Name</h4>
                                                                <p class="txt-md m-0">@deliveryMethod.Description</p>
                                                            </div>
                                                            <div class="col-md-3 col-6 d-flex justify-content-center align-items-center">
                                                                <div class="delivery-method-price">@ClientCurrency.GetPriceAndDisplay(deliveryMethod.Price)</div>
                                                            </div>
                                                            <div class="col-md-2 col-6 px-5 d-flex justify-content-end align-items-center">
                                                                <button type="button" class="btn outline-primary">Select</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                        <section id="about-sec">
                                            <div id="paypal-animation-content">
                                                <div data-version="4.0.331" class="paypal-button-container paypal-button-layout-horizontal paypal-button-shape-pill paypal-button-branding-branded paypal-button-number-single paypal-button-env-production paypal-should-focus">
                                                    </style><img class="paypal-button-logo paypal-button-logo-pp paypal-button-logo-gold" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAyNCAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij4KICAgIDxwYXRoIGZpbGw9IiMwMDljZGUiIGQ9Ik0gMjAuOTA1IDkuNSBDIDIxLjE4NSA3LjQgMjAuOTA1IDYgMTkuNzgyIDQuNyBDIDE4LjU2NCAzLjMgMTYuNDExIDIuNiAxMy42OTcgMi42IEwgNS43MzkgMi42IEMgNS4yNzEgMi42IDQuNzEgMy4xIDQuNjE1IDMuNiBMIDEuMzM5IDI1LjggQyAxLjMzOSAyNi4yIDEuNjIgMjYuNyAyLjA4OCAyNi43IEwgNi45NTYgMjYuNyBMIDYuNjc1IDI4LjkgQyA2LjU4MSAyOS4zIDYuODYyIDI5LjYgNy4yMzYgMjkuNiBMIDExLjM1NiAyOS42IEMgMTEuODI1IDI5LjYgMTIuMjkyIDI5LjMgMTIuMzg2IDI4LjggTCAxMi4zODYgMjguNSBMIDEzLjIyOCAyMy4zIEwgMTMuMjI4IDIzLjEgQyAxMy4zMjIgMjIuNiAxMy43OSAyMi4yIDE0LjI1OCAyMi4yIEwgMTQuODIxIDIyLjIgQyAxOC44NDUgMjIuMiAyMS45MzUgMjAuNSAyMi44NzEgMTUuNSBDIDIzLjMzOSAxMy40IDIzLjE1MyAxMS43IDIyLjAyOSAxMC41IEMgMjEuNzQ4IDEwLjEgMjEuMjc5IDkuOCAyMC45MDUgOS41IEwgMjAuOTA1IDkuNSI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzAxMjE2OSIgZD0iTSAyMC45MDUgOS41IEMgMjEuMTg1IDcuNCAyMC45MDUgNiAxOS43ODIgNC43IEMgMTguNTY0IDMuMyAxNi40MTEgMi42IDEzLjY5NyAyLjYgTCA1LjczOSAyLjYgQyA1LjI3MSAyLjYgNC43MSAzLjEgNC42MTUgMy42IEwgMS4zMzkgMjUuOCBDIDEuMzM5IDI2LjIgMS42MiAyNi43IDIuMDg4IDI2LjcgTCA2Ljk1NiAyNi43IEwgOC4yNjcgMTguNCBMIDguMTczIDE4LjcgQyA4LjI2NyAxOC4xIDguNzM1IDE3LjcgOS4yOTYgMTcuNyBMIDExLjYzNiAxNy43IEMgMTYuMjI0IDE3LjcgMTkuNzgyIDE1LjcgMjAuOTA1IDEwLjEgQyAyMC44MTIgOS44IDIwLjkwNSA5LjcgMjAuOTA1IDkuNSI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSA5LjQ4NSA5LjUgQyA5LjU3NyA5LjIgOS43NjUgOC45IDEwLjA0NiA4LjcgQyAxMC4yMzIgOC43IDEwLjMyNiA4LjYgMTAuNTEzIDguNiBMIDE2LjY5MiA4LjYgQyAxNy40NDIgOC42IDE4LjE4OSA4LjcgMTguNzUzIDguOCBDIDE4LjkzOSA4LjggMTkuMTI3IDguOCAxOS4zMTQgOC45IEMgMTkuNTAxIDkgMTkuNjg4IDkgMTkuNzgyIDkuMSBDIDE5Ljg3NSA5LjEgMTkuOTY4IDkuMSAyMC4wNjMgOS4xIEMgMjAuMzQzIDkuMiAyMC42MjQgOS40IDIwLjkwNSA5LjUgQyAyMS4xODUgNy40IDIwLjkwNSA2IDE5Ljc4MiA0LjYgQyAxOC42NTggMy4yIDE2LjUwNiAyLjYgMTMuNzkgMi42IEwgNS43MzkgMi42IEMgNS4yNzEgMi42IDQuNzEgMyA0LjYxNSAzLjYgTCAxLjMzOSAyNS44IEMgMS4zMzkgMjYuMiAxLjYyIDI2LjcgMi4wODggMjYuNyBMIDYuOTU2IDI2LjcgTCA4LjI2NyAxOC40IEwgOS40ODUgOS41IFoiPjwvcGF0aD4KPC9zdmc+Cg" alt="" aria-label="pp"> <img class="paypal-button-logo paypal-button-logo-paypal paypal-button-logo-gold" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTAwIDMyIiB4bWxucz0iaHR0cDomI3gyRjsmI3gyRjt3d3cudzMub3JnJiN4MkY7MjAwMCYjeDJGO3N2ZyIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pbllNaW4gbWVldCI+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSAxMiA0LjkxNyBMIDQuMiA0LjkxNyBDIDMuNyA0LjkxNyAzLjIgNS4zMTcgMy4xIDUuODE3IEwgMCAyNS44MTcgQyAtMC4xIDI2LjIxNyAwLjIgMjYuNTE3IDAuNiAyNi41MTcgTCA0LjMgMjYuNTE3IEMgNC44IDI2LjUxNyA1LjMgMjYuMTE3IDUuNCAyNS42MTcgTCA2LjIgMjAuMjE3IEMgNi4zIDE5LjcxNyA2LjcgMTkuMzE3IDcuMyAxOS4zMTcgTCA5LjggMTkuMzE3IEMgMTQuOSAxOS4zMTcgMTcuOSAxNi44MTcgMTguNyAxMS45MTcgQyAxOSA5LjgxNyAxOC43IDguMTE3IDE3LjcgNi45MTcgQyAxNi42IDUuNjE3IDE0LjYgNC45MTcgMTIgNC45MTcgWiBNIDEyLjkgMTIuMjE3IEMgMTIuNSAxNS4wMTcgMTAuMyAxNS4wMTcgOC4zIDE1LjAxNyBMIDcuMSAxNS4wMTcgTCA3LjkgOS44MTcgQyA3LjkgOS41MTcgOC4yIDkuMzE3IDguNSA5LjMxNyBMIDkgOS4zMTcgQyAxMC40IDkuMzE3IDExLjcgOS4zMTcgMTIuNCAxMC4xMTcgQyAxMi45IDEwLjUxNyAxMy4xIDExLjIxNyAxMi45IDEyLjIxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSAzNS4yIDEyLjExNyBMIDMxLjUgMTIuMTE3IEMgMzEuMiAxMi4xMTcgMzAuOSAxMi4zMTcgMzAuOSAxMi42MTcgTCAzMC43IDEzLjYxNyBMIDMwLjQgMTMuMjE3IEMgMjkuNiAxMi4wMTcgMjcuOCAxMS42MTcgMjYgMTEuNjE3IEMgMjEuOSAxMS42MTcgMTguNCAxNC43MTcgMTcuNyAxOS4xMTcgQyAxNy4zIDIxLjMxNyAxNy44IDIzLjQxNyAxOS4xIDI0LjgxNyBDIDIwLjIgMjYuMTE3IDIxLjkgMjYuNzE3IDIzLjggMjYuNzE3IEMgMjcuMSAyNi43MTcgMjkgMjQuNjE3IDI5IDI0LjYxNyBMIDI4LjggMjUuNjE3IEMgMjguNyAyNi4wMTcgMjkgMjYuNDE3IDI5LjQgMjYuNDE3IEwgMzIuOCAyNi40MTcgQyAzMy4zIDI2LjQxNyAzMy44IDI2LjAxNyAzMy45IDI1LjUxNyBMIDM1LjkgMTIuNzE3IEMgMzYgMTIuNTE3IDM1LjYgMTIuMTE3IDM1LjIgMTIuMTE3IFogTSAzMC4xIDE5LjMxNyBDIDI5LjcgMjEuNDE3IDI4LjEgMjIuOTE3IDI1LjkgMjIuOTE3IEMgMjQuOCAyMi45MTcgMjQgMjIuNjE3IDIzLjQgMjEuOTE3IEMgMjIuOCAyMS4yMTcgMjIuNiAyMC4zMTcgMjIuOCAxOS4zMTcgQyAyMy4xIDE3LjIxNyAyNC45IDE1LjcxNyAyNyAxNS43MTcgQyAyOC4xIDE1LjcxNyAyOC45IDE2LjExNyAyOS41IDE2LjcxNyBDIDMwIDE3LjQxNyAzMC4yIDE4LjMxNyAzMC4xIDE5LjMxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSA1NS4xIDEyLjExNyBMIDUxLjQgMTIuMTE3IEMgNTEgMTIuMTE3IDUwLjcgMTIuMzE3IDUwLjUgMTIuNjE3IEwgNDUuMyAyMC4yMTcgTCA0My4xIDEyLjkxNyBDIDQzIDEyLjQxNyA0Mi41IDEyLjExNyA0Mi4xIDEyLjExNyBMIDM4LjQgMTIuMTE3IEMgMzggMTIuMTE3IDM3LjYgMTIuNTE3IDM3LjggMTMuMDE3IEwgNDEuOSAyNS4xMTcgTCAzOCAzMC41MTcgQyAzNy43IDMwLjkxNyAzOCAzMS41MTcgMzguNSAzMS41MTcgTCA0Mi4yIDMxLjUxNyBDIDQyLjYgMzEuNTE3IDQyLjkgMzEuMzE3IDQzLjEgMzEuMDE3IEwgNTUuNiAxMy4wMTcgQyA1NS45IDEyLjcxNyA1NS42IDEyLjExNyA1NS4xIDEyLjExNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA2Ny41IDQuOTE3IEwgNTkuNyA0LjkxNyBDIDU5LjIgNC45MTcgNTguNyA1LjMxNyA1OC42IDUuODE3IEwgNTUuNSAyNS43MTcgQyA1NS40IDI2LjExNyA1NS43IDI2LjQxNyA1Ni4xIDI2LjQxNyBMIDYwLjEgMjYuNDE3IEMgNjAuNSAyNi40MTcgNjAuOCAyNi4xMTcgNjAuOCAyNS44MTcgTCA2MS43IDIwLjExNyBDIDYxLjggMTkuNjE3IDYyLjIgMTkuMjE3IDYyLjggMTkuMjE3IEwgNjUuMyAxOS4yMTcgQyA3MC40IDE5LjIxNyA3My40IDE2LjcxNyA3NC4yIDExLjgxNyBDIDc0LjUgOS43MTcgNzQuMiA4LjAxNyA3My4yIDYuODE3IEMgNzIgNS42MTcgNzAuMSA0LjkxNyA2Ny41IDQuOTE3IFogTSA2OC40IDEyLjIxNyBDIDY4IDE1LjAxNyA2NS44IDE1LjAxNyA2My44IDE1LjAxNyBMIDYyLjYgMTUuMDE3IEwgNjMuNCA5LjgxNyBDIDYzLjQgOS41MTcgNjMuNyA5LjMxNyA2NCA5LjMxNyBMIDY0LjUgOS4zMTcgQyA2NS45IDkuMzE3IDY3LjIgOS4zMTcgNjcuOSAxMC4xMTcgQyA2OC40IDEwLjUxNyA2OC41IDExLjIxNyA2OC40IDEyLjIxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA5MC43IDEyLjExNyBMIDg3IDEyLjExNyBDIDg2LjcgMTIuMTE3IDg2LjQgMTIuMzE3IDg2LjQgMTIuNjE3IEwgODYuMiAxMy42MTcgTCA4NS45IDEzLjIxNyBDIDg1LjEgMTIuMDE3IDgzLjMgMTEuNjE3IDgxLjUgMTEuNjE3IEMgNzcuNCAxMS42MTcgNzMuOSAxNC43MTcgNzMuMiAxOS4xMTcgQyA3Mi44IDIxLjMxNyA3My4zIDIzLjQxNyA3NC42IDI0LjgxNyBDIDc1LjcgMjYuMTE3IDc3LjQgMjYuNzE3IDc5LjMgMjYuNzE3IEMgODIuNiAyNi43MTcgODQuNSAyNC42MTcgODQuNSAyNC42MTcgTCA4NC4zIDI1LjYxNyBDIDg0LjIgMjYuMDE3IDg0LjUgMjYuNDE3IDg0LjkgMjYuNDE3IEwgODguMyAyNi40MTcgQyA4OC44IDI2LjQxNyA4OS4zIDI2LjAxNyA4OS40IDI1LjUxNyBMIDkxLjQgMTIuNzE3IEMgOTEuNCAxMi41MTcgOTEuMSAxMi4xMTcgOTAuNyAxMi4xMTcgWiBNIDg1LjUgMTkuMzE3IEMgODUuMSAyMS40MTcgODMuNSAyMi45MTcgODEuMyAyMi45MTcgQyA4MC4yIDIyLjkxNyA3OS40IDIyLjYxNyA3OC44IDIxLjkxNyBDIDc4LjIgMjEuMjE3IDc4IDIwLjMxNyA3OC4yIDE5LjMxNyBDIDc4LjUgMTcuMjE3IDgwLjMgMTUuNzE3IDgyLjQgMTUuNzE3IEMgODMuNSAxNS43MTcgODQuMyAxNi4xMTcgODQuOSAxNi43MTcgQyA4NS41IDE3LjQxNyA4NS43IDE4LjMxNyA4NS41IDE5LjMxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA5NS4xIDUuNDE3IEwgOTEuOSAyNS43MTcgQyA5MS44IDI2LjExNyA5Mi4xIDI2LjQxNyA5Mi41IDI2LjQxNyBMIDk1LjcgMjYuNDE3IEMgOTYuMiAyNi40MTcgOTYuNyAyNi4wMTcgOTYuOCAyNS41MTcgTCAxMDAgNS42MTcgQyAxMDAuMSA1LjIxNyA5OS44IDQuOTE3IDk5LjQgNC45MTcgTCA5NS44IDQuOTE3IEMgOTUuNCA0LjkxNyA5NS4yIDUuMTE3IDk1LjEgNS40MTcgWiI+PC9wYXRoPjwvc3ZnPg" alt="" aria-label="paypal"><span class="paypal-button-text" optional=""> Checkout</span>
                                                </div>
                                            </div>
                                            <div class="sec-container">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="about-content-wrap">
                                                            <h2 class="txt-accent">About Us</h2>
                                                            <h3>We Are Recycle!</h3>
                                                            <div class="about-text">
                                                                <p>TEXT TEXT TEXT</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>

                                    </div>
                                    <div class="step-panel" role="tabpanel" id="step-payment">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-7 mb-4">
                                                <h3 class="mb-4">Credit Card</h3>
                                                <div class="single-form-item">
                                                    <input asp-for="CreditCard.CardNumber" class="i-txt" />
                                                    <span asp-validation-for="CreditCard.CardNumber" class="text-danger"></span>
                                                </div>

                                                </style><img class="paypal-button-logo paypal-button-logo-pp paypal-button-logo-gold" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAyNCAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij4KICAgIDxwYXRoIGZpbGw9IiMwMDljZGUiIGQ9Ik0gMjAuOTA1IDkuNSBDIDIxLjE4NSA3LjQgMjAuOTA1IDYgMTkuNzgyIDQuNyBDIDE4LjU2NCAzLjMgMTYuNDExIDIuNiAxMy42OTcgMi42IEwgNS43MzkgMi42IEMgNS4yNzEgMi42IDQuNzEgMy4xIDQuNjE1IDMuNiBMIDEuMzM5IDI1LjggQyAxLjMzOSAyNi4yIDEuNjIgMjYuNyAyLjA4OCAyNi43IEwgNi45NTYgMjYuNyBMIDYuNjc1IDI4LjkgQyA2LjU4MSAyOS4zIDYuODYyIDI5LjYgNy4yMzYgMjkuNiBMIDExLjM1NiAyOS42IEMgMTEuODI1IDI5LjYgMTIuMjkyIDI5LjMgMTIuMzg2IDI4LjggTCAxMi4zODYgMjguNSBMIDEzLjIyOCAyMy4zIEwgMTMuMjI4IDIzLjEgQyAxMy4zMjIgMjIuNiAxMy43OSAyMi4yIDE0LjI1OCAyMi4yIEwgMTQuODIxIDIyLjIgQyAxOC44NDUgMjIuMiAyMS45MzUgMjAuNSAyMi44NzEgMTUuNSBDIDIzLjMzOSAxMy40IDIzLjE1MyAxMS43IDIyLjAyOSAxMC41IEMgMjEuNzQ4IDEwLjEgMjEuMjc5IDkuOCAyMC45MDUgOS41IEwgMjAuOTA1IDkuNSI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzAxMjE2OSIgZD0iTSAyMC45MDUgOS41IEMgMjEuMTg1IDcuNCAyMC45MDUgNiAxOS43ODIgNC43IEMgMTguNTY0IDMuMyAxNi40MTEgMi42IDEzLjY5NyAyLjYgTCA1LjczOSAyLjYgQyA1LjI3MSAyLjYgNC43MSAzLjEgNC42MTUgMy42IEwgMS4zMzkgMjUuOCBDIDEuMzM5IDI2LjIgMS42MiAyNi43IDIuMDg4IDI2LjcgTCA2Ljk1NiAyNi43IEwgOC4yNjcgMTguNCBMIDguMTczIDE4LjcgQyA4LjI2NyAxOC4xIDguNzM1IDE3LjcgOS4yOTYgMTcuNyBMIDExLjYzNiAxNy43IEMgMTYuMjI0IDE3LjcgMTkuNzgyIDE1LjcgMjAuOTA1IDEwLjEgQyAyMC44MTIgOS44IDIwLjkwNSA5LjcgMjAuOTA1IDkuNSI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSA5LjQ4NSA5LjUgQyA5LjU3NyA5LjIgOS43NjUgOC45IDEwLjA0NiA4LjcgQyAxMC4yMzIgOC43IDEwLjMyNiA4LjYgMTAuNTEzIDguNiBMIDE2LjY5MiA4LjYgQyAxNy40NDIgOC42IDE4LjE4OSA4LjcgMTguNzUzIDguOCBDIDE4LjkzOSA4LjggMTkuMTI3IDguOCAxOS4zMTQgOC45IEMgMTkuNTAxIDkgMTkuNjg4IDkgMTkuNzgyIDkuMSBDIDE5Ljg3NSA5LjEgMTkuOTY4IDkuMSAyMC4wNjMgOS4xIEMgMjAuMzQzIDkuMiAyMC42MjQgOS40IDIwLjkwNSA5LjUgQyAyMS4xODUgNy40IDIwLjkwNSA2IDE5Ljc4MiA0LjYgQyAxOC42NTggMy4yIDE2LjUwNiAyLjYgMTMuNzkgMi42IEwgNS43MzkgMi42IEMgNS4yNzEgMi42IDQuNzEgMyA0LjYxNSAzLjYgTCAxLjMzOSAyNS44IEMgMS4zMzkgMjYuMiAxLjYyIDI2LjcgMi4wODggMjYuNyBMIDYuOTU2IDI2LjcgTCA4LjI2NyAxOC40IEwgOS40ODUgOS41IFoiPjwvcGF0aD4KPC9zdmc+Cg" alt="" aria-label="pp"> <img class="paypal-button-logo paypal-button-logo-paypal paypal-button-logo-gold" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTAwIDMyIiB4bWxucz0iaHR0cDomI3gyRjsmI3gyRjt3d3cudzMub3JnJiN4MkY7MjAwMCYjeDJGO3N2ZyIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pbllNaW4gbWVldCI+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSAxMiA0LjkxNyBMIDQuMiA0LjkxNyBDIDMuNyA0LjkxNyAzLjIgNS4zMTcgMy4xIDUuODE3IEwgMCAyNS44MTcgQyAtMC4xIDI2LjIxNyAwLjIgMjYuNTE3IDAuNiAyNi41MTcgTCA0LjMgMjYuNTE3IEMgNC44IDI2LjUxNyA1LjMgMjYuMTE3IDUuNCAyNS42MTcgTCA2LjIgMjAuMjE3IEMgNi4zIDE5LjcxNyA2LjcgMTkuMzE3IDcuMyAxOS4zMTcgTCA5LjggMTkuMzE3IEMgMTQuOSAxOS4zMTcgMTcuOSAxNi44MTcgMTguNyAxMS45MTcgQyAxOSA5LjgxNyAxOC43IDguMTE3IDE3LjcgNi45MTcgQyAxNi42IDUuNjE3IDE0LjYgNC45MTcgMTIgNC45MTcgWiBNIDEyLjkgMTIuMjE3IEMgMTIuNSAxNS4wMTcgMTAuMyAxNS4wMTcgOC4zIDE1LjAxNyBMIDcuMSAxNS4wMTcgTCA3LjkgOS44MTcgQyA3LjkgOS41MTcgOC4yIDkuMzE3IDguNSA5LjMxNyBMIDkgOS4zMTcgQyAxMC40IDkuMzE3IDExLjcgOS4zMTcgMTIuNCAxMC4xMTcgQyAxMi45IDEwLjUxNyAxMy4xIDExLjIxNyAxMi45IDEyLjIxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSAzNS4yIDEyLjExNyBMIDMxLjUgMTIuMTE3IEMgMzEuMiAxMi4xMTcgMzAuOSAxMi4zMTcgMzAuOSAxMi42MTcgTCAzMC43IDEzLjYxNyBMIDMwLjQgMTMuMjE3IEMgMjkuNiAxMi4wMTcgMjcuOCAxMS42MTcgMjYgMTEuNjE3IEMgMjEuOSAxMS42MTcgMTguNCAxNC43MTcgMTcuNyAxOS4xMTcgQyAxNy4zIDIxLjMxNyAxNy44IDIzLjQxNyAxOS4xIDI0LjgxNyBDIDIwLjIgMjYuMTE3IDIxLjkgMjYuNzE3IDIzLjggMjYuNzE3IEMgMjcuMSAyNi43MTcgMjkgMjQuNjE3IDI5IDI0LjYxNyBMIDI4LjggMjUuNjE3IEMgMjguNyAyNi4wMTcgMjkgMjYuNDE3IDI5LjQgMjYuNDE3IEwgMzIuOCAyNi40MTcgQyAzMy4zIDI2LjQxNyAzMy44IDI2LjAxNyAzMy45IDI1LjUxNyBMIDM1LjkgMTIuNzE3IEMgMzYgMTIuNTE3IDM1LjYgMTIuMTE3IDM1LjIgMTIuMTE3IFogTSAzMC4xIDE5LjMxNyBDIDI5LjcgMjEuNDE3IDI4LjEgMjIuOTE3IDI1LjkgMjIuOTE3IEMgMjQuOCAyMi45MTcgMjQgMjIuNjE3IDIzLjQgMjEuOTE3IEMgMjIuOCAyMS4yMTcgMjIuNiAyMC4zMTcgMjIuOCAxOS4zMTcgQyAyMy4xIDE3LjIxNyAyNC45IDE1LjcxNyAyNyAxNS43MTcgQyAyOC4xIDE1LjcxNyAyOC45IDE2LjExNyAyOS41IDE2LjcxNyBDIDMwIDE3LjQxNyAzMC4yIDE4LjMxNyAzMC4xIDE5LjMxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwMzA4NyIgZD0iTSA1NS4xIDEyLjExNyBMIDUxLjQgMTIuMTE3IEMgNTEgMTIuMTE3IDUwLjcgMTIuMzE3IDUwLjUgMTIuNjE3IEwgNDUuMyAyMC4yMTcgTCA0My4xIDEyLjkxNyBDIDQzIDEyLjQxNyA0Mi41IDEyLjExNyA0Mi4xIDEyLjExNyBMIDM4LjQgMTIuMTE3IEMgMzggMTIuMTE3IDM3LjYgMTIuNTE3IDM3LjggMTMuMDE3IEwgNDEuOSAyNS4xMTcgTCAzOCAzMC41MTcgQyAzNy43IDMwLjkxNyAzOCAzMS41MTcgMzguNSAzMS41MTcgTCA0Mi4yIDMxLjUxNyBDIDQyLjYgMzEuNTE3IDQyLjkgMzEuMzE3IDQzLjEgMzEuMDE3IEwgNTUuNiAxMy4wMTcgQyA1NS45IDEyLjcxNyA1NS42IDEyLjExNyA1NS4xIDEyLjExNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA2Ny41IDQuOTE3IEwgNTkuNyA0LjkxNyBDIDU5LjIgNC45MTcgNTguNyA1LjMxNyA1OC42IDUuODE3IEwgNTUuNSAyNS43MTcgQyA1NS40IDI2LjExNyA1NS43IDI2LjQxNyA1Ni4xIDI2LjQxNyBMIDYwLjEgMjYuNDE3IEMgNjAuNSAyNi40MTcgNjAuOCAyNi4xMTcgNjAuOCAyNS44MTcgTCA2MS43IDIwLjExNyBDIDYxLjggMTkuNjE3IDYyLjIgMTkuMjE3IDYyLjggMTkuMjE3IEwgNjUuMyAxOS4yMTcgQyA3MC40IDE5LjIxNyA3My40IDE2LjcxNyA3NC4yIDExLjgxNyBDIDc0LjUgOS43MTcgNzQuMiA4LjAxNyA3My4yIDYuODE3IEMgNzIgNS42MTcgNzAuMSA0LjkxNyA2Ny41IDQuOTE3IFogTSA2OC40IDEyLjIxNyBDIDY4IDE1LjAxNyA2NS44IDE1LjAxNyA2My44IDE1LjAxNyBMIDYyLjYgMTUuMDE3IEwgNjMuNCA5LjgxNyBDIDYzLjQgOS41MTcgNjMuNyA5LjMxNyA2NCA5LjMxNyBMIDY0LjUgOS4zMTcgQyA2NS45IDkuMzE3IDY3LjIgOS4zMTcgNjcuOSAxMC4xMTcgQyA2OC40IDEwLjUxNyA2OC41IDExLjIxNyA2OC40IDEyLjIxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA5MC43IDEyLjExNyBMIDg3IDEyLjExNyBDIDg2LjcgMTIuMTE3IDg2LjQgMTIuMzE3IDg2LjQgMTIuNjE3IEwgODYuMiAxMy42MTcgTCA4NS45IDEzLjIxNyBDIDg1LjEgMTIuMDE3IDgzLjMgMTEuNjE3IDgxLjUgMTEuNjE3IEMgNzcuNCAxMS42MTcgNzMuOSAxNC43MTcgNzMuMiAxOS4xMTcgQyA3Mi44IDIxLjMxNyA3My4zIDIzLjQxNyA3NC42IDI0LjgxNyBDIDc1LjcgMjYuMTE3IDc3LjQgMjYuNzE3IDc5LjMgMjYuNzE3IEMgODIuNiAyNi43MTcgODQuNSAyNC42MTcgODQuNSAyNC42MTcgTCA4NC4zIDI1LjYxNyBDIDg0LjIgMjYuMDE3IDg0LjUgMjYuNDE3IDg0LjkgMjYuNDE3IEwgODguMyAyNi40MTcgQyA4OC44IDI2LjQxNyA4OS4zIDI2LjAxNyA4OS40IDI1LjUxNyBMIDkxLjQgMTIuNzE3IEMgOTEuNCAxMi41MTcgOTEuMSAxMi4xMTcgOTAuNyAxMi4xMTcgWiBNIDg1LjUgMTkuMzE3IEMgODUuMSAyMS40MTcgODMuNSAyMi45MTcgODEuMyAyMi45MTcgQyA4MC4yIDIyLjkxNyA3OS40IDIyLjYxNyA3OC44IDIxLjkxNyBDIDc4LjIgMjEuMjE3IDc4IDIwLjMxNyA3OC4yIDE5LjMxNyBDIDc4LjUgMTcuMjE3IDgwLjMgMTUuNzE3IDgyLjQgMTUuNzE3IEMgODMuNSAxNS43MTcgODQuMyAxNi4xMTcgODQuOSAxNi43MTcgQyA4NS41IDE3LjQxNyA4NS43IDE4LjMxNyA4NS41IDE5LjMxNyBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA5NS4xIDUuNDE3IEwgOTEuOSAyNS43MTcgQyA5MS44IDI2LjExNyA5Mi4xIDI2LjQxNyA5Mi41IDI2LjQxNyBMIDk1LjcgMjYuNDE3IEMgOTYuMiAyNi40MTcgOTYuNyAyNi4wMTcgOTYuOCAyNS41MTcgTCAxMDAgNS42MTcgQyAxMDAuMSA1LjIxNyA5OS44IDQuOTE3IDk5LjQgNC45MTcgTCA5NS44IDQuOTE3IEMgOTUuNCA0LjkxNyA5NS4yIDUuMTE3IDk1LjEgNS40MTcgWiI+PC9wYXRoPjwvc3ZnPg" alt="" aria-label="paypal"><span class="paypal-button-text" optional=""> Checkout</span>

                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="CreditCard.CardExpiryDate" class="i-txt" />
                                                            <span asp-validation-for="CreditCard.CardExpiryDate" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="single-form-item">
                                                            <input asp-for="CreditCard.CardSecurityCode" class="i-txt" />
                                                            <span asp-validation-for="CreditCard.CardSecurityCode" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="single-form-item">
                                                    <input asp-for="CreditCard.CardHolderName" class="i-txt" />
                                                    <span asp-validation-for="CreditCard.CardHolderName" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-5 d-none d-md-block">
                                                <div class="d-flex justify-content-center align-items-center h-100"><span class="icon icon-credit icon-land txt-hover-bg" aria-hidden="true"></span></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="step-panel" role="tabpanel" id="step-review">
                                        <div class="txt-md mb-5">
                                            <div class="table-header text-center mb-4 mb-md-0">
                                                <div class="row">
                                                    <div class="col-md-5">Item</div>
                                                    <div class="col d-none d-md-block">
                                                        <div class="row">
                                                            <div class="col-md-4">Price</div>
                                                            <div class="col-md-4">Quantity</div>
                                                            <div class="col-md-4">Total</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="table-body">
                                                @foreach (var cartProduct in ClientCart.Cart.Products)
                                                {
                                                    <div class="table-row">
                                                        <div class="d-flex align-items-center text-left text-md-center row">
                                                            <div class="col-12 col-md-5">
                                                                <div class="d-flex align-items-center">
                                                                    <a asp-area="Shop" asp-controller="Product" asp-action="Index" asp-route-id="@cartProduct.Product.Id" target="_blank">
                                                                        <img class="row-image" src="@cartProduct.Product.ImagePath" alt="@cartProduct.Product.Name" />
                                                                    </a>
                                                                    <div class="row-title text-left">
                                                                        <a asp-area="Shop" asp-controller="Product" asp-action="Index" asp-route-id="@cartProduct.Product.Id" target="_blank" class="primary-link text-uppercase">@cartProduct.Product.Name</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="mt-4 mt-md-0 col-12 col-md-7">
                                                                <div class="row align-items-center">
                                                                    <div class="col-md-4">
                                                                        <div class="d-flex justify-content-md-center justify-content-between">
                                                                            <div class="d-md-none txt-secondary">Price</div>
                                                                            <div class="text-right text-md-center">
                                                                                @if (cartProduct.Product.IsOnSaleNow())
                                                                                {
                                                                                    <strike>@ClientCurrency.GetPriceAndDisplay(cartProduct.Product.Price)</strike>
                                                                                    <br class="d-none d-md-block" />
                                                                                }
                                                                                <span class="@(cartProduct.Product.IsOnSaleNow() ? "txt-accent" : "") ml-2 ml-md-0">@ClientCurrency.GetPriceAndDisplay(cartProduct.Product.ActualPrice())</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <div class="d-flex justify-content-md-center justify-content-between">
                                                                            <div class="d-md-none txt-secondary">Quantity</div>
                                                                            <div class="text-right text-md-center">@cartProduct.Quantity</div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <div class="d-flex justify-content-md-center justify-content-between">
                                                                            <div class="d-md-none txt-secondary">Total Price</div>
                                                                            <div class="text-right text-md-center">@ClientCurrency.GetPriceAndDisplay(cartProduct.Product.ActualPrice() * cartProduct.Quantity)</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                        <div class="single-form-item mb-5">
                                            <input asp-for="Note" class="i-txt" />
                                            <span asp-validation-for="Note" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-actions">
                                    <div class="d-flex justify-content-between flex-column-reverse flex-sm-row">
                                        <button type="button" data-step-prev class="btn btn-neutral" style="visibility:hidden;"><span class="icon icon-arrow-left3 icon-top-adjust mr-3"></span>Previous</button>
                                        <button type="submit" data-step-finish class="btn btn-primary hover-push px-5 mb-3 mb-sm-0" data-submit-loader>Place Order<span class="icon icon-checkmark2 icon-top-adjust ml-3"></span></button>
                                        <button type="button" data-step-next class="btn btn-primary hover-push px-6 mb-3 mb-sm-0">Next<span class="icon icon-arrow-right4 icon-top-adjust ml-3"></span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-6 col-md-7 col-sm-8 pl-xl-5 m-auto m-xl-0">
                        <h3 class="block-title">Order Summary</h3>
                        <div class="form-container bg-white mb-5">
                            <ul class="list-unstyled mb-3">
                                <li class="summary-item"><span>Order Subtotal </span><span>@ClientCurrency.GetPriceAndDisplay(ClientCart.GetSubtotal())</span></li>
                                <li class="summary-item"><span>Shipping<button type="button" id="summary-shipping" class="secondary-link" data-toggle="popover" data-trigger="focus" data-placement="top" data-content="Please select a delivery method."><span class="icon icon-question ml-3 icon-top-adjust" aria-hidden="true"></span></button></span><span id="summary-shipping-price"></span></li>
                                <li class="summary-item"><span>Discount</span><span>-@ClientCurrency.GetPriceAndDisplay(ClientCart.GetTotalDiscount())</span></li>
                                <li class="summary-item border-0"><span>Total</span><strong class="order-summary-total">@ClientCurrency.GetPriceAndDisplay(ClientCart.GetTotalPrice())</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(function () {
            var totalPrice = @ClientCurrency.GetPrice(ClientCart.GetTotalPrice());

            $('[data-delivery-method]').change(function () {
                let deliveryPrice = $(this).parent().find('.delivery-method-price').text();

                // Updates the delivery method name and price in the summary:
                $('#summary-shipping').attr('data-content', $(this).parent().find('.delivery-method-name').text());
                $('#summary-shipping-price').text(deliveryPrice);
                let $orderTotal = $('.order-summary-total');
                let totalPriceWithShipping = (parseFloat(deliveryPrice.substring(1)) + totalPrice);
                $orderTotal.text($orderTotal.text().charAt(0) + totalPriceWithShipping.toFixed(2));
            });
        });
    </script>
}





