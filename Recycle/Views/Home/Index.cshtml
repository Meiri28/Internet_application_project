@model IEnumerable<Recycle.Models.Hashtag>

@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome To RECYCLE</h1>
</div>

<div>
    @foreach (var hashtag in Model)
    {
        <h2>@hashtag.Title </h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">  
            @for (int i=0;i<3 && i<hashtag.Products.Count(); i++)
            {
                Product p = hashtag.Products[i];
                <div class="col">
                    <div class="card">
                        @if (p.Pictures != null && p.Pictures.First() != null)
                        {
                            <img class="card-img-top" src="data:image/png;base64,@Convert.ToBase64String(p.Pictures.First().Data)" alt="Card image cap">
                        } else
                        {
                            <img class="card-img-top" src="~/images/Recycle.jpg" alt="Card image cap">
                        }
                        <div class="card-body">
                            <h5 class="card-title">@p.ItemName</h5>
                            <p class="card-text">@p.ItemDesc</p>
                            <a class="btn btn-primary" asp-action="Details" asp-controller="Products" asp-route-id="@p.Id">MORE DETAILS</a>
                            <a class="btn btn-primary" asp-action="Create" asp-controller="Transactions" asp-route-id="@p.Id">BUY NOW</a>
                        </div>
                        <div class="card-footer">
                            <small class="text-muted">@p.Price</small>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>