@model Recycle.Models.Product

@{
    ViewData["Title"] = "Details";
}

<div class="card text-center">

    <h5 class="card-header">@Model.ItemName</h5>

    <div class="card-body">
        <div class="carousel slide" data-bs-ride="carousel" id="carousel">
            <div class="carousel-inner">
                @{
                    String active = "active";
                    if (Model.Pictures != null)
                        foreach (var p in Model.Pictures)
                        {
                            <div class="carousel-item @active">
                                <img src="data:image/png;base64,@Convert.ToBase64String(p.Data)" />
                            </div>
                            active = String.Empty;
                        }
                    if (Model.Video != null)
                    {
                        <div class="carousel-item @active">
                            <video src="data:video/mp4;base64,@Convert.ToBase64String(Model.Video)" autoplay loop muted />
                        </div>

                    }
                    if (Model.Video == null && (Model.Pictures == null || Model.Pictures.Count == 0))
                            {
                        <div class="carousel-item @active">
                            <img src="~/images/Recycle.jpg" />
                        </div>
                    }
                }
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <p class="card-text">@Model.ItemDesc</p>

        <p class="card-text">@Model.Size</p>

        <p class="card-text">@Model.Color</p>

        <p class="card-columns">@Model.Price</p>

        @{
            if (Model.Hashtags!=null)
                foreach (Hashtag h in Model.Hashtags)
                {
                    <span class="badge bg-primary">@h.Title</span>
                }
        }

        <div>
            <a class="btn btn-primary" asp-action="Create" asp-controller="Transactions" asp-route-id="@Model.Id">BUY NOW</a>
        </div>
        <div class="card-footer">@Model.Amount items left</div>

    </div>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>
